{% extends 'base.html.twig' %}

{% block title %}{% endblock %}

{% block body %}
	<div class="content">
		<div class="container-fluid">
			<div class="row">
				<div class="col-md-12">
					<div class="card">
						<div class="header">
							<h4 class="title">Mise à jour de l'utilisateur</h4>
						</div>
						<div class="content">
							<form method="post" action="/admin/user/{{user.id}}/update">
								<input type="hidden" name="_method" value="PATCH">
								<div class="row">
									<div class="col-md-4">
										<div class="form-group">
											<label for="name">Nom</label>
											<input type="text" id="name" class="form-control" name="name" placeholder="{{user.name}}">
										</div>
									</div>
									<div class="col-md-4">
										<div class="form-group">
											<label for="lastname">Prénom</label>
											<input type="text" id="lastname" class="form-control" name="lastname" placeholder="{{user.lastname}}">
										</div>
									</div>
									<div class="col-md-4 mt-25" style="margin-top: 24px">
										<select name="role" class="form-select btn dropdown-toggle " aria-label="Default select example">
											
											{% if user.getRoles()[0] == 'ROLE_'~ constant('App\\Entity\\User::users_roles')['admin'] %}
											<option value="{{ constant('App\\Entity\\User::users_roles')['admin'] }}" selected>{{ constant('App\\Entity\\User::users_roles')['admin'] }}</option>
											<option value="{{ constant('App\\Entity\\User::users_roles')['user'] }}">{{ constant('App\\Entity\\User::users_roles')['user'] }}</option>
											{% else %}
											<option value="{{ constant('App\\Entity\\User::users_roles')['admin'] }}" >{{ constant('App\\Entity\\User::users_roles')['admin'] }}</option>
											<option value="{{ constant('App\\Entity\\User::users_roles')['user'] }}" selected>{{ constant('App\\Entity\\User::users_roles')['user'] }}</option>
											{% endif %}
										</select>
									</div>
								</div>

								<div class="row">
									<div class="col-md-4">
										<div class="form-group">
											<label for="email">ADRESSE E-MAIL</label>
											<input type="email" id="email" name="email" class="form-control" placeholder="{{user.email}}">
										</div>
									</div>

									<div class="col-md-4">
										<div class="form-group">
											<label for="password">Mot de passe</label>
											<input type="password" id="password" name="password" class="form-control" placeholder="Mot de passe">
										</div>
									</div>

									<div class="col-md-4">
										<div class="form-group">
											<label for="password_confirmation">Confirmer mot de passe</label>
											<input type="password" id="password_confirmation" class="form-control" name="password_confirmation" placeholder="Confirmer mot de passe">
											<span id="message"></span>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<label class="toggle">
											{% if user.attributes['activated'] is not null %}
												<span for"active" class="toggle-label">Activé</span>
												<input class="toggle-checkbox" id="active" name="activated" type="checkbox" checked>
												<div class="toggle-switch"></div>
											{% else %}
												<span for"active" class="toggle-label">Activé</span>
												<input class="toggle-checkbox" id="active" name="activated" type="checkbox">
												<div class="toggle-switch"></div>
											{% endif %}

										</label>
									</div>
								</div>
								<button type="submit" id="submit" class="btn btn-info btn-fill pull-right">Mise à jour</button>
								<div class="clearfix"></div>
							</form>
						</div>
					</div>
				</div>


			</div>
		
	
{% endblock %}
